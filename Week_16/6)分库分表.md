学习笔记

##### Mysql主从复制

一、主从复制原理
1、主库写binlog
2、从库relay log

异步复制：网络或机器故障，会造成数据不一致
半同步复制：需要启用插件，保证Source和Replica最终一致性
组复制：基于分布式Paxos协议实现组复制，保证数据一致性

二、主从复制的局限性
1、主从延迟问题
2、应用侧需要配合读写分离框架
3、不解决高可用问题

三、读写分离框架 shardingsphere

四、高可用
1、读写分离，提升读的处理能力
2、故障转移，提供failover能力
高可用意味着，更少的不可服务时间。一般用SLA/SLO衡量。

常见的一些策略:
1、多个实例不在一个主机/机架上
2、跨机房和可用区部署
3、两地三中心容灾高可用方案

MySQL Group Replication(MGR)
MGR的特点：
1、高一致性：基于分布式Paxos协议实现组复制，保证数据一致性
2、高容错性：自动检测机制，只要不是大多数节点都宕机就可以继续，工作，内置防脑裂保护机制
3、高扩展性：节点的增加与移除会自动更新组成员信息，新节点加入后，自动从其他节点同步增量数据，直到与其他节点数据-致
4、高灵活性：提供单主模式和多主模式，单主模式在主库宕机后能够自动选主，所有写入都在主节点进行，多主模式支持多节点写入